"use strict";function createLocalStorage(e,t){return localStorage.getItem(e)?t=JSON.parse(localStorage.getItem(e)):localStorage.setItem(e,JSON.stringify(t)),t}function setData(e,t){var a=JSON.stringify(e);localStorage.setItem(t,a)}function getData(e,t){var a=JSON.stringify(e);localStorage.getItem(t,a)}function updateStorageData(){setData(humansArr,"human storage"),setData(companiesArr,"company storage"),setData(autoArr,"auto storage"),getData(humansArr,"human storage"),getData(companiesArr,"company storage"),getData(autoArr,"auto storage")}function createShowButtons(){document.querySelector(".wrapper").innerHTML+='\n    <div class="buttons-box">\n        <button type="button" class="btn btn-outline-danger human">Human</button>\n        <button type="button" class="btn btn-outline-warning company">Company</button>\n        <button type="button" class="btn btn-outline-success auto">Auto</button>\n    </div>\n    '}function createTable(e){document.querySelector(".caption").innerHTML+='<div class="caption-name">\n        <span>'.concat(e,'</span>\n    </div>\n    <div class="caption-action">\n        <span>Actions</span>\n    </div>')}function createBaseTable(){document.querySelector(".wrapper").innerHTML+='<div class="info-block">\n        <div class="caption"></div>\n        <div class="data"></div>\n    </div>'}function setInfoToTable(e,t){for(var a=document.querySelector(".data"),n=0;n<e.length;n++)a.innerHTML+='<div data-category="'.concat(e[n].id,'">\n            ').concat(createActionButton(e[n].id,t).outerHTML,"\n        </div>");return a}function setDataToTable(e){for(var t=0;t<e.length;t++)setValue(e[t].id,e[t].name)}function setAutoDataToTable(){for(var e=0;e<autoArr.length;e++)setValue(autoArr[e].id,autoArr[e].mark)}function setValue(e,t){var a=document.querySelector('div[data-category="'.concat(e,'"]'));null!==a&&a.insertAdjacentHTML("afterbegin","<div>".concat(t,"</div>"))}function createActionButton(e,t){var a=document.createElement("div");return a.classList.add("action-box"),a.innerHTML='<button type="button" data-category="'.concat(e,'" class="btn btn-success view ').concat(t,'">View</button>\n    <button type="button" data-category="').concat(e,'" class="btn btn-warning edit ').concat(t,'">Edit</button>\n    <button type="button" data-category="').concat(e,'" class="btn btn-danger delete ').concat(t,'">Delete</button>'),a}function createForm(e){var t=document.createElement("form");return t.setAttribute("name",e),t.classList.add("form-control"),t}function createButton(e,t,a){var n=document.createElement("button");return n.classList.add(t),e.appendChild(n),n.innerHTML+=a,n}function createInputs(e,t,a,n,r){var o=document.createElement("label");o.setAttribute("for",n),o.innerHTML=e;var c=document.createElement("input");return c.setAttribute("type",t),c.setAttribute("name",a),c.setAttribute("id",n),c.setAttribute("value",r),o.appendChild(c),o.insertAdjacentHTML("beforeend",'<div class="hidden error" id="'.concat(a,'-error">').concat(a," is not correct</div>")),o}function createDeleteBlock(e){document.querySelector(".action-block").innerHTML="\n    <div class=\"delete-popup\">\n        <p class = 'list-items'>Are you sure?</p>\n        <button class = '".concat(e," cancel btn btn-success'>Cancel</button>\n        <button class = '").concat(e," confirm btn btn-danger'>Delete</button>\n    </div>\n    ")}function addDeleteDataListener(t){var a=document.querySelector(".delete-popup");a.addEventListener("click",function(e){a.innerHTML="",e.target.classList.contains("cancel")||(e.target.classList.contains("confirm")&&e.target.classList.contains("human")?deleteData(humansArr,t):e.target.classList.contains("confirm")&&e.target.classList.contains("company")?deleteData(companiesArr,t):e.target.classList.contains("confirm")&&e.target.classList.contains("auto")&&deleteData(autoArr,t),updateStorageData())})}function deleteData(e,t){for(var a=0;a<e.length;a++)if(t===parseInt(e[a].id)){var n=document.querySelector(".data"),r=document.querySelector('[data-category="'.concat(t,'"]'));n.removeChild(r),e.splice(a,1);break}}function createButtonAddUser(e){var t=document.querySelector(".info-block"),a=document.createElement("button");return a.classList.add("add-btn","btn-warning","btn",e),t.querySelector(".add-btn")&&t.removeChild(t.childNodes[0]),t.insertAdjacentElement("afterbegin",a),a.innerHTML+="Add user",a}function createCloseButton(e){document.querySelector(e).innerHTML+='\n    <button type="button" class="close" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n    </button>',addCloseListener()}function getId(e,t){var a=e.getAttribute(t);return(a=a||e.parentNode.getAttribute(t))?a:null}function chooseClikedButton(e,t,a,n,r,o){document.querySelector(".caption").firstChild&&(document.querySelector(".caption").innerHTML="",document.querySelector(".data").innerHTML=""),e(t),a(n,r),o(n)}function addListenerToInfoButton(){document.querySelector(".buttons-box").addEventListener("click",function(e){e.target.classList.contains("human")&&(chooseClikedButton(createTable,"Person Name",setInfoToTable,humansArr,"human",setDataToTable),createButtonAddUser("human"),addAddUserListeners(humansArr)),e.target.classList.contains("company")&&(chooseClikedButton(createTable,"Company Name",setInfoToTable,companiesArr,"company",setDataToTable),createButtonAddUser("company"),addAddUserListeners(companiesArr)),e.target.classList.contains("auto")&&(chooseClikedButton(createTable,"Car Mark",setInfoToTable,autoArr,"auto",setAutoDataToTable),createButtonAddUser("auto"),addAddUserListeners(autoArr))}),addListenerToActions()}function addListenerToActions(){var e=document.querySelector(".data"),t=document.querySelector(".wrapper"),b=document.createElement("div");b.classList.add("action-block"),t.appendChild(b),e.addEventListener("click",function(e){var t=parseInt(getId(e.target,"data-category")),a=document.querySelector(".action-block");if(a.classList.contains("hidden")&&a.classList.remove("hidden"),e.target.classList.contains("view")&&e.target.classList.contains("human")){for(var n in b.innerHTML="",humansArr)t===parseInt(humansArr[n].id)&&(b.innerHTML+="<p>Name: ".concat(humansArr[n].name,"</p>\n                    <p>Card Balance: ").concat(humansArr[n].balance,"</p>\n                    <p>Phone number: ").concat(humansArr[n].tel,"</p>"),humansArr[n].car?b.innerHTML+="<p>Property: ".concat(humansArr[n].car,"</p>"):b.innerHTML+="<p>There is no property </p>",createBurgainButtons(t));createCloseButton(".action-block")}if(e.target.classList.contains("view")&&e.target.classList.contains("company")){for(var r in b.innerHTML="",companiesArr)t===parseInt(companiesArr[r].id)&&(b.innerHTML+="<p>Name: ".concat(companiesArr[r].name,"</p>\n                    <p>Card Balance: ").concat(companiesArr[r].balance,"</p>\n                    <p>Phone number: ").concat(companiesArr[r].tel,"</p>\n                    <p>People amount: ").concat(companiesArr[r].workersAmount,"</p>"),companiesArr[r].car?b.innerHTML+="<p>Property: ".concat(companiesArr[r].car,"</p>"):b.innerHTML+="<p>There is no property </p>",createBurgainButtons(t));createCloseButton(".action-block")}if(e.target.classList.contains("view")&&e.target.classList.contains("auto")){for(var o in b.innerHTML="",autoArr)t===parseInt(autoArr[o].id)&&(b.innerHTML+="<p>Mark: ".concat(autoArr[o].mark,"</p>\n                    <p>Year: ").concat(autoArr[o].year,"</p>\n                    <p>Price: ").concat(autoArr[o].price,"</p>"));createCloseButton(".action-block")}if(e.target.classList.contains("edit")&&e.target.classList.contains("human")){b.innerHTML="";var c=createForm("editForm");for(var i in createCloseButton(".action-block"),humansArr){t===parseInt(humansArr[i].id)&&(c.appendChild(createInputs("Name: ","text","name","name-field",humansArr[i].name)),c.appendChild(createInputs("Balance: ","text","balance","balance-field",humansArr[i].balance)),c.appendChild(createInputs("Tel: ","text","tel","tel-field",humansArr[i].tel)),c.appendChild(createButton(c,"confirm-button","Confirm")).classList.add("btn","btn-success","human-btn"))}b.appendChild(c),addEditListeners(t)}if(e.target.classList.contains("edit")&&e.target.classList.contains("company")){b.innerHTML="";var s=createForm("editForm");for(var d in createCloseButton(".action-block"),companiesArr){t===parseInt(companiesArr[d].id)&&(s.appendChild(createInputs("name: ","text","name","name-field",companiesArr[d].name)),s.appendChild(createInputs("Balance: ","text","balance","balance-field",companiesArr[d].balance)),s.appendChild(createInputs("Tel: ","text","tel","tel-field",companiesArr[d].tel)),s.appendChild(createInputs("People amount: ","text","workersAmount","workersAmount-field",companiesArr[d].workersAmount)),s.appendChild(createButton(s,"confirm-button","Confirm")).classList.add("btn","btn-success","company-btn"))}b.appendChild(s),addEditListeners(t)}if(e.target.classList.contains("edit")&&e.target.classList.contains("auto")){b.innerHTML="";var l=createForm("editForm");for(var u in createCloseButton(".action-block"),autoArr){t===parseInt(autoArr[u].id)&&(l.appendChild(createInputs("Mark: ","text","mark","mark-field",autoArr[u].mark)),l.appendChild(createInputs("Year: ","text","year","year-field",autoArr[u].year)),l.appendChild(createInputs("Price: ","text","price","price-field",autoArr[u].price)),l.appendChild(createButton(l,"confirm-button","Confirm")).classList.add("btn","btn-success","auto-btn"))}b.appendChild(l),addEditListeners(t)}if(e.target.classList.contains("delete")&&e.target.classList.contains("human"))for(var p in b.innerHTML="",humansArr)t===parseInt(humansArr[p].id)&&(createDeleteBlock("human"),addDeleteDataListener(t));if(e.target.classList.contains("delete")&&e.target.classList.contains("company"))for(var m in b.innerHTML="",companiesArr)t===parseInt(companiesArr[m].id)&&(createDeleteBlock("company"),addDeleteDataListener(t));if(e.target.classList.contains("delete")&&e.target.classList.contains("auto"))for(var h in b.innerHTML="",autoArr)t===parseInt(autoArr[h].id)&&(createDeleteBlock("auto"),addDeleteDataListener(t))})}function createSelectInput(){var e=document.createElement("div");e.classList.add("select"),e.innerHTML+="Choose car";var t=document.createElement("select");t.setAttribute("name","car"),t.innerHTML="";for(var a=0;a<autoArr.length;a++)t.innerHTML+="<option>".concat(autoArr[a].mark,"</option>");return e.appendChild(t),e.innerHTML+='<div class="hidden error" id="car-error">car is not correct</div>',e}function addEditListeners(i){document.querySelector(".confirm-button").addEventListener("click",function(e){for(var t=document.querySelector("form"),a={},n=0,r=Object.values(t);n<r.length;n++){var o,c=r[n];c.name&&((o=isValid(c.value,c.name))?"id"===c.name?findID(c.name,c.value,a,t):a[c.name]=c.value:(event.preventDefault(),delete a[c.name]),validate(o,c.name))}return editElement(e,a,i),a})}function findID(e,t,a,n){for(var r=0;r<humansArr.length;r++){if(humansArr[r].id===parseInt(t)){event.preventDefault(),delete a[e];var o=document.createElement("p");return o.classList.add("wrongID"),o.remove(),n.querySelector(".wrongID")&&n.removeChild(n.childNodes[0]),o.innerHTML+="This ID has already used",void n.insertAdjacentElement("afterbegin",o)}n.querySelector(".wrongID")&&n.removeChild(n.childNodes[0]),a[e]=t}for(var c=0;c<companiesArr.length;c++){if(companiesArr[c].id===parseInt(t)){event.preventDefault(),delete a[e];var i=document.createElement("p");return i.classList.add("wrongID"),i.remove(),n.querySelector(".wrongID")&&n.removeChild(n.childNodes[0]),i.innerHTML+="This ID has already used",void n.insertAdjacentElement("afterbegin",i)}n.querySelector(".wrongID")&&n.removeChild(n.childNodes[0]),a[e]=t}for(var s=0;s<autoArr.length;s++){if(autoArr[s].id===parseInt(t)){event.preventDefault(),delete a[e];var d=document.createElement("p");return d.classList.add("wrongID"),d.remove(),n.querySelector(".wrongID")&&n.removeChild(n.childNodes[0]),d.innerHTML+="This ID has already used",void n.insertAdjacentElement("afterbegin",d)}n.querySelector(".wrongID")&&n.removeChild(n.childNodes[0]),a[e]=t}}function editElement(e,t,a){if(Object.keys(t).includes("key"))event.preventDefault();else if(e.target.classList.contains("human-btn")){for(var n,r=0;r<humansArr.length;r++){a===humansArr[r].id&&(n=humansArr[r].id,humansArr[r]=t,humansArr[r].id=n)}updateStorageData()}else if(e.target.classList.contains("company-btn")){for(var o,c=0;c<companiesArr.length;c++){a===companiesArr[c].id&&(o=companiesArr[c].id,companiesArr[c]=t,companiesArr[c].id=o)}updateStorageData()}else if(e.target.classList.contains("auto-btn")){for(var i,s=0;s<autoArr.length;s++){a===autoArr[s].id&&(i=autoArr[s].id,autoArr[s]=t,autoArr[s].id=i)}updateStorageData()}}function addAddUserListeners(){var e=document.querySelector(".add-btn"),a=document.querySelector(".action-block");e.addEventListener("click",function(e){a.innerHTML="",a.classList.remove("hidden");var t=createForm("addForm");e.target.classList.contains("human")?(t.appendChild(createInputs("ID: ","text","id","id-field","")),t.appendChild(createInputs("Name: ","text","name","name-field","")),t.appendChild(createInputs("Balance: ","text","balance","balance-field","")),t.appendChild(createInputs("Tel: ","text","tel","tel-field","")),t.appendChild(createSelectInput()),t.appendChild(createButton(t,"save-button","Save")).classList.add("btn","btn-success","human")):e.target.classList.contains("company")?(t.appendChild(createInputs("ID: ","text","id","id-field","")),t.appendChild(createInputs("name: ","text","name","name-field","")),t.appendChild(createInputs("Balance: ","text","balance","balance-field","")),t.appendChild(createInputs("Tel: ","text","tel","tel-field","")),t.appendChild(createInputs("Workers amount: ","text","workersAmount","workersAmount-field","")),t.appendChild(createSelectInput()),t.appendChild(createButton(t,"save-button","Save")).classList.add("btn","btn-success","company")):e.target.classList.contains("auto")&&(t.appendChild(createInputs("ID: ","text","id","id-field","")),t.appendChild(createInputs("Mark: ","text","mark","mark-field","")),t.appendChild(createInputs("Year: ","text","year","year-field","")),t.appendChild(createInputs("Price: ","text","price","price-field","")),t.appendChild(createButton(t,"save-button","Save")).classList.add("btn","btn-success","auto")),a.appendChild(t),createCloseButton(".action-block"),addSaveListeners()})}function addCloseListener(){document.querySelector(".close").addEventListener("click",function(){document.querySelector(".action-block").classList.add("hidden"),document.querySelector(".aware")&&document.querySelector(".aware").classList.add("hidden")})}function addSaveListeners(){var e=document.querySelector(".save-button"),s={};return e.addEventListener("click",function(e){for(var t=document.querySelector("form"),a=0,n=Object.values(t);a<n.length;a++){var r=n[a];if(r.name){var o=isValid(r.value,r.name);if(o)if("id"===r.name)findID(r.name,r.value,s,t);else if("car"===r.name)for(var c,i=0;i<autoArr.length;i++){autoArr[i].mark===r.value&&(autoArr[i].price<=parseInt(s.balance)?(t.querySelector(".wrongCar")&&t.removeChild(t.childNodes[0]),s[r.name]=r.value,s.balance=s.balance-autoArr[i].price):(event.preventDefault(),delete s[r.name],(c=document.createElement("p")).classList.add("wrongCar"),c.remove(),t.querySelector(".wrongCar")&&t.removeChild(t.childNodes[0]),c.innerHTML+="You have not money for purchase",t.insertAdjacentElement("afterbegin",c)))}else s[r.name]=r.value;else event.preventDefault(),delete s[r.name];validate(o,r.name)}}e.target.classList.contains("human")&&5===t.querySelectorAll(".hidden").length&&!t.querySelector("p")?(humansArr.push(s),updateStorageData()):e.target.classList.contains("company")&&6===t.querySelectorAll(".hidden").length&&!t.querySelector("p")?(companiesArr.push(s),updateStorageData()):e.target.classList.contains("auto")&&4===t.querySelectorAll(".hidden").length&&!t.querySelector("p")&&(autoArr.push(s),updateStorageData())}),s}function validate(e,t){e?document.getElementById(t+"-error").classList.add("hidden"):document.getElementById(t+"-error").classList.remove("hidden")}function isValid(e,t){return setPatterns()[t].test(e)}function setPatterns(){return{id:/^[0-9]{1,}$/g,name:/^[A-Z][a-z]{1,20}$/g,owner:/^[A-Z][a-z]{1,20}$/g,mark:/^[A-Z][a-z]{1,20}\s?[A-Z]?[a-z]{1,20}?$/g,year:/^[0-9]{4}$/g,workersAmount:/^[0-9]{1,}$/,balance:/^[0-9]{1,}$/g,tel:/^\+?38\s[0-9]{3}\s[0-9]{3}\s[0-9]{2}\s[0-9]{2}$/g,price:/^[0-9]{1,}$/g,car:/^[A-Z][a-z]{1,20}$/g}}function createBurgainButtons(e){var t=document.createElement("div"),a=document.querySelector(".action-block");t.classList.add("burgain-buttons"),t.innerHTML+='\n    <button class="buy-button btn btn-outline-danger">Buy car</button>\n    <button class="sold-button btn btn-outline-success">Sold car</button>\n    ',a.appendChild(t),addBurgainListener(e)}function addBurgainListener(o){var c=document.querySelector(".action-block");c.addEventListener("click",function(e){if(e.target.classList.contains("buy-button")&&(chechProperty(humansArr,o,c),chechProperty(companiesArr,o,c),event.stopImmediatePropagation()),e.target.classList.contains("sold-button")){for(var t in humansArr){var a;o===parseInt(humansArr[t].id)&&(humansArr[t].car?(createDeleteBlock(),addListenerForSoldCar(o,humansArr)):(a=document.createElement("div"),clearAwareBlock(".aware"),a.classList.add("aware"),a.innerHTML+="You don`t have any cars",document.querySelector(".burgain-buttons").classList.add("hidden"),c.appendChild(a)))}for(var n in companiesArr){var r;o===parseInt(companiesArr[n].id)&&(companiesArr[n].car?(createDeleteBlock(),addListenerForSoldCar(o,companiesArr)):(r=document.createElement("div"),clearAwareBlock(".aware"),r.classList.add("aware"),r.innerHTML+="You don`t have any cars",document.querySelector(".burgain-buttons").classList.add("hidden"),c.appendChild(r)))}}})}function chechProperty(e,t,a){for(var n in e){var r;t===parseInt(e[n].id)&&(e[n].car?(r=document.createElement("div"),clearAwareBlock(".aware"),clearAwareBlock(".select"),r.classList.add("aware"),r.innerHTML+="You have car",document.querySelector(".burgain-buttons").classList.add("hidden"),a.appendChild(r)):(clearAwareBlock(".aware"),clearAwareBlock(".select"),a.appendChild(createSelectInput()),a.appendChild(createBuyButton()),addBuyListener(t,e),document.querySelector(".burgain-buttons").classList.add("hidden")))}}function addListenerForSoldCar(r,o){var c=document.querySelector(".delete-popup");c.addEventListener("click",function(e){if(e.target.classList.contains("cancel"))c.classList.add("hidden");else if(e.target.classList.contains("confirm"))for(var t in o){var a,n;r===parseInt(o[t].id)&&((a=document.createElement("div")).innerHTML+="<p>There is no more property </p>",n=findCurrentCar(o[t].car),o[t].balance=o[t].balance+n,delete o[t].car,c.classList.add("hidden"),document.querySelector(".action-block").appendChild(a),updateStorageData())}})}function findCurrentCar(e){for(var t in autoArr)if(e===autoArr[t].mark)return autoArr[t].price}function clearAwareBlock(e){var t=document.querySelector(".action-block");document.querySelector(e)&&t.lastChild.remove()}function createBuyButton(){var e=document.createElement("button");return e.classList.add("select-and-buy","btn","btn-success"),e.innerText="Buy",e}function addBuyListener(o,c){var e=document.querySelector(".select-and-buy"),i=document.querySelector(".action-block");e.addEventListener("click",function(){var e=document.querySelector("select").options.selectedIndex,t=document.querySelector("select").options[e].text;for(var a in c)if(o===parseInt(c[a].id))for(var n,r=0;r<autoArr.length;r++){t===autoArr[r].mark&&(autoArr[r].price<=parseInt(c[a].balance)?(document.querySelector(".wrongCar")&&i.removeChild(i.childNodes[0]),c[a].car=t,c[a].balance=c[a].balance-autoArr[r].price,updateStorageData(),location.reload()):((n=document.createElement("p")).classList.add("wrongCar"),n.remove(),document.querySelector(".wrongCar")&&i.removeChild(i.childNodes[0]),n.innerHTML+="You have not money for purchase",i.insertAdjacentElement("afterbegin",n)))}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5qcyJdLCJuYW1lcyI6WyJjcmVhdGVMb2NhbFN0b3JhZ2UiLCJzdG9yYWdlTmFtZSIsImFyciIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJnZXRJdGVtIiwic3RyaW5naWZ5Iiwic2V0RGF0YSIsImFycmF5IiwiZGF0YSIsImdldERhdGEiLCJ1cGRhdGVTdG9yYWdlRGF0YSIsImNvbXBhbmllc0FyciIsImF1dG9BcnIiLCJodW1hbnNBcnIiLCJjcmVhdGVUYWJsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInBhcmVudCIsImRpdkNvbnRlbnQiLCJhcnJDYXRlZ29yeSIsImNyZWF0ZUJhc2VUYWJsZSIsInNldFZhbHVlIiwidmFsdWUiLCJhcnJOYW1lIiwiY2F0ZWdvcnkiLCJpIiwibGVuZ3RoIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiaWQiLCJjcmVhdGVBY3Rpb25CdXR0b24iLCJvdXRlckhUTUwiLCJkaXYiLCJjbGFzc0xpc3QiLCJuYW1lIiwiZm9ybSIsInNldEF0dHJpYnV0ZSIsIm5hbWVGb3JtIiwiYWRkIiwibWFyayIsImNyZWF0ZUJ1dHRvbiIsImJ1dHRvbiIsImxhYmVsIiwibGFiZWxOYW1lIiwiaW5wdXQiLCJjcmVhdGVFbGVtZW50IiwicGxhY2Vob2xkZXJWYWx1ZSIsImNyZWF0ZURlbGV0ZUJsb2NrIiwiYmxvY2siLCJhZGREZWxldGVEYXRhTGlzdGVuZXIiLCJhdHRyIiwidGFyZ2V0IiwiYXBwZW5kQ2hpbGQiLCJkZWxldGVEYXRhIiwic2VsZWN0ZWREYXRhQ2F0ZWdvcnkiLCJpZElucHV0IiwidHlwZUlucHV0IiwiZGl2Q2F0ZWdvcnkiLCJ3cmFwcGVyIiwibmFtZUlucHV0IiwiY3JlYXRlQnV0dG9uQWRkVXNlciIsImNvbmNhdCIsImluc2VydEFkamFjZW50RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY3JlYXRlQ2xvc2VCdXR0b24iLCJjb250YWlucyIsImFkZENsb3NlTGlzdGVuZXIiLCJnZXRJZCIsImF0dHJpYnV0ZU5hbWUiLCJwYXJzZUludCIsInJlbW92ZUNoaWxkIiwic3BsaWNlIiwiY3JlYXRlQ2xhc3MiLCJtYXJrZXIiLCJzZXRJbmZvIiwic2V0Q2xhc3MiLCJjaGlsZE5vZGVzIiwiYWRkTGlzdGVuZXJUb0luZm9CdXR0b24iLCJhZGRBZGRVc2VyTGlzdGVuZXJzIiwiYWRkTGlzdGVuZXJUb0FjdGlvbnMiLCJwYXJlbnROb2RlIiwiZ2V0QXR0cmlidXRlIiwiYWN0aW9uYmxvY2siLCJyZW1vdmUiLCJmaXJzdENoaWxkIiwic2V0SW5mb1RvVGFibGUiLCJzZXREYXRhVG9UYWJsZSIsImNob29zZUNsaWtlZEJ1dHRvbiIsInNldEF1dG9EYXRhVG9UYWJsZSIsImNyZWF0ZUJ1cmdhaW5CdXR0b25zIiwia2V5IiwiY3JlYXRlRm9ybSIsImJhbGFuY2UiLCJjcmVhdGVJbnB1dHMiLCJjYXIiLCJ3b3JrZXJzQW1vdW50IiwiYWRkRWRpdExpc3RlbmVycyIsInllYXIiLCJwcmljZSIsImJ1dHRvbkNvbmYiLCJ0ZWwiLCJ2YWxpZEVsZW1lbnRzIiwiZWxlbWVudCIsImlzVmFsaWRWYWx1ZSIsImV2ZW50IiwidmFsaWRhdGUiLCJzZWxlY3QiLCJlZGl0RWxlbWVudCIsImZpbmRJRCIsImVycm9ySWRUZXh0IiwiT2JqZWN0IiwidmFsdWVzIiwiaXNWYWxpZCIsImVsZW1lbnROYW1lIiwicHJldmVudERlZmF1bHQiLCJlbGVtZW50VmFsdWUiLCJrZXlzIiwiY3JlYXRlU2VsZWN0SW5wdXQiLCJidXR0b25TYXZlIiwiYWRkU2F2ZUxpc3RlbmVycyIsInNhdmVCdXR0b24iLCJfaTYiLCJfZWxlbWVudHNBcnIyIiwicXVlcnlTZWxlY3RvckFsbCIsImdldEVsZW1lbnRCeUlkIiwicHVzaCIsInNldFBhdHRlcm5zIiwidXNlclJlZ0V4cHMiLCJwYXR0ZXJuIiwid3JhcHBlckJsb2NrIiwib3duZXIiLCJhZGRCdXJnYWluTGlzdGVuZXIiLCJjaGVjaFByb3BlcnR5Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiYnV0dG9uV3JhcHBlciIsImNsZWFyQXdhcmVCbG9jayIsImJ1cmdhaW5CdXR0b25zIiwiYWRkTGlzdGVuZXJGb3JTb2xkQ2FyIiwiY3JlYXRlQnV5QnV0dG9uIiwiZmluZEN1cnJlbnRDYXIiLCJzZWxlY3RvciIsInNlbGVjdENhcmluZGV4Iiwic2VsZWN0ZWRDYXIiLCJhZGRCdXlMaXN0ZW5lciIsIm9wdGlvbnMiLCJzZWxlY3RlZEluZGV4IiwidGV4dCIsImxvY2F0aW9uIiwicmVsb2FkIl0sIm1hcHBpbmdzIjoiYUFRSyxTQUFNQSxtQkFBQUMsRUFBQUMsR0FPWCxPQU5RQyxhQUFhQyxRQUFRSCxHQUN4QkMsRUFBQUcsS0FBQUMsTUFBQUgsYUFBQUksUUFBQU4sSUFFREUsYUFBQUMsUUFBQUgsRUFBQUksS0FBQUcsVUFBQU4sSUFHS08sRUFHUixTQUFBQSxRQUFBQyxFQUFBVCxHQUZHLElBQUlVLEVBQU9OLEtBQUtHLFVBQVVFLEdBSTlCUCxhQUFpQk8sUUFBT1QsRUFBYVUsR0FHcEMsU0FBQUMsUUFBQUYsRUFBQVQsR0FGRyxJQUFJVSxFQUFPTixLQUFLRyxVQUFVRSxHQUs5QlAsYUFBU1UsUUFBQUEsRUFBb0JGLEdBSXpCQyxTQUFPQyxvQkFDUEQsUUFBUUUsVUFBRCxpQkFDUEYsUUFBUUcsYUFBUyxtQkFFckJOLFFBQUFNLFFBQUEsZ0JBRUFILFFBQUFJLFVBQUEsaUJBQ0FKLFFBQUFFLGFBQUEsbUJBQ0FGLFFBQUFHLFFBQUEsZ0JBZ0JBLFNBQVNFLG9CQUNRQyxTQUFTQyxjQUFjLFlBQzdCQyxXQUFQQyxpVEFGSixTQUFTSixZQUFZSyxHQXVCakJKLFNBQW9CSyxjQUFwQixZQUNXSCxXQUFQQyw2Q0FBQUEsT0FwQlFDLEVBb0JSRCxtR0FXSCxTQUFBRyxrQkFDSk4sU0FBQUMsY0FBQSxZQXZCVUMsV0FBUCw4R0ErQkosU0FBU0ssZUFBYUMsRUFBT0MsR0FHekIsSUFEQSxJQUFJQyxFQUFXVixTQUFTQyxjQUFULFNBQ1hTLEVB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RUFBT3FELFlBQVlyRCxFQUFPMkQsV0FBVyxJQUd6Q2lDLEVBQVk3RixXQUFhLGtDQUN6QkMsRUFBTzRDLHNCQUFzQixhQUFjZ0QiLCJmaWxlIjoiZnVuY3Rpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vL2xvY2FsU3RvcmFnZVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZUxvY2FsU3RvcmFnZShzdG9yYWdlTmFtZSwgYXJyKSB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VOYW1lKSkge1xuICAgICAgICBhcnIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VOYW1lKSk7IFxuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VOYW1lLCBKU09OLnN0cmluZ2lmeShhcnIpKTsgXG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjtcbn1cblxuZnVuY3Rpb24gc2V0RGF0YShhcnJheSwgc3RvcmFnZU5hbWUpIHtcbiAgICBsZXQgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGFycmF5KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlTmFtZSwgZGF0YSk7IFxufVxuXG5mdW5jdGlvbiBnZXREYXRhKGFycmF5LCBzdG9yYWdlTmFtZSkgeyBcbiAgICBsZXQgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGFycmF5KTtcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlTmFtZSwgZGF0YSk7XG59XG5cblxuZnVuY3Rpb24gdXBkYXRlU3RvcmFnZURhdGEoKSB7XG4gICAgc2V0RGF0YShodW1hbnNBcnIsICdodW1hbiBzdG9yYWdlJyk7XG4gICAgc2V0RGF0YShjb21wYW5pZXNBcnIsICdjb21wYW55IHN0b3JhZ2UnKTtcbiAgICBzZXREYXRhKGF1dG9BcnIsICdhdXRvIHN0b3JhZ2UnKTtcbiAgICBnZXREYXRhKGh1bWFuc0FyciwgJ2h1bWFuIHN0b3JhZ2UnKTtcbiAgICBnZXREYXRhKGNvbXBhbmllc0FyciwgJ2NvbXBhbnkgc3RvcmFnZScpO1xuICAgIGdldERhdGEoYXV0b0FyciwgJ2F1dG8gc3RvcmFnZScpO1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICBcblxuLy8gJCgnLndyYXBwZXInKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJidXR0b25zLWJveFwiPjwvZGl2PicpO1xuLy8gJCgnLmJ1dHRvbi1ib3gnKS5hcHBlbmQoXG4vLyAgICAgYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLWRhbmdlciBodW1hblwiPkh1bWFuPC9idXR0b24+XG4vLyAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtd2FybmluZyBjb21wYW55XCI+Q29tcGFueTwvYnV0dG9uPlxuLy8gICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLXN1Y2Nlc3MgYXV0b1wiPkF1dG88L2J1dHRvbj5gKTtcblxuZnVuY3Rpb24gY3JlYXRlU2hvd0J1dHRvbnMoKSB7XG4gICAgbGV0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyJyk7XG4gICAgcGFyZW50LmlubmVySFRNTCArPSBcbiAgICBgXG4gICAgPGRpdiBjbGFzcz1cImJ1dHRvbnMtYm94XCI+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLWRhbmdlciBodW1hblwiPkh1bWFuPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLXdhcm5pbmcgY29tcGFueVwiPkNvbXBhbnk8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtc3VjY2VzcyBhdXRvXCI+QXV0bzwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIGA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlKGRpdkNvbnRlbnQpIHtcbiAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcHRpb24nKTtcbiAgICBwYXJlbnQuaW5uZXJIVE1MICs9IFxuICAgIGA8ZGl2IGNsYXNzPVwiY2FwdGlvbi1uYW1lXCI+XG4gICAgICAgIDxzcGFuPiR7ZGl2Q29udGVudH08L3NwYW4+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNhcHRpb24tYWN0aW9uXCI+XG4gICAgICAgIDxzcGFuPkFjdGlvbnM8L3NwYW4+XG4gICAgPC9kaXY+YFxufVxuXG5mdW5jdGlvbiBjcmVhdGVCYXNlVGFibGUoKSB7XG4gICAgbGV0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyJyk7XG4gICAgcGFyZW50LmlubmVySFRNTCArPSBcbiAgIGA8ZGl2IGNsYXNzPVwiaW5mby1ibG9ja1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FwdGlvblwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0YVwiPjwvZGl2PlxuICAgIDwvZGl2PmBcbn1cblxuZnVuY3Rpb24gc2V0SW5mb1RvVGFibGUoYXJyQ2F0ZWdvcnksIGFyck5hbWUpIHtcbiAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGEnKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyQ2F0ZWdvcnkubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgIHBhcmVudC5pbm5lckhUTUwgKz0gXG4gICAgICAgIGA8ZGl2IGRhdGEtY2F0ZWdvcnk9XCIke2FyckNhdGVnb3J5W2ldLmlkfVwiPlxuICAgICAgICAgICAgJHtjcmVhdGVBY3Rpb25CdXR0b24oYXJyQ2F0ZWdvcnlbaV0uaWQsIGFyck5hbWUpLm91dGVySFRNTH1cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudDtcbn1cblxuZnVuY3Rpb24gc2V0RGF0YVRvVGFibGUoYXJyYXkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNldFZhbHVlKGFycmF5W2ldLmlkLCBhcnJheVtpXS5uYW1lKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldEF1dG9EYXRhVG9UYWJsZSgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1dG9BcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2V0VmFsdWUoYXV0b0FycltpXS5pZCwgYXV0b0FycltpXS5tYXJrKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldFZhbHVlKGlkLCB2YWx1ZSkge1xuXG4gICAgbGV0IGNhdGVnb3J5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2RhdGEtY2F0ZWdvcnk9XCIke2lkfVwiXWApO1xuICAgIGlmIChjYXRlZ29yeSAhPT0gbnVsbCkge1xuICAgICAgIGNhdGVnb3J5Lmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGA8ZGl2PiR7dmFsdWV9PC9kaXY+YCk7IFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFjdGlvbkJ1dHRvbihpZCwgYXJyKSB7XG4gICAgbGV0IGRpdj0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGlvbi1ib3gnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gXG4gICAgYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtY2F0ZWdvcnk9XCIke2lkfVwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzIHZpZXcgJHthcnJ9XCI+VmlldzwvYnV0dG9uPlxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtY2F0ZWdvcnk9XCIke2lkfVwiIGNsYXNzPVwiYnRuIGJ0bi13YXJuaW5nIGVkaXQgJHthcnJ9XCI+RWRpdDwvYnV0dG9uPlxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtY2F0ZWdvcnk9XCIke2lkfVwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXIgZGVsZXRlICR7YXJyfVwiPkRlbGV0ZTwvYnV0dG9uPmA7XG5cbiAgICByZXR1cm4gZGl2O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGb3JtKG5hbWVGb3JtKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnbmFtZScsIG5hbWVGb3JtKTtcbiAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tY29udHJvbCcpO1xuXG4gICAgcmV0dXJuIGZvcm07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihwYXJlbnQsIGF0dHIsIHZhbHVlKSB7XG4gICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKGF0dHIpO1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgKz0gdmFsdWU7XG5cbiAgICByZXR1cm4gYnV0dG9uO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJbnB1dHMobGFiZWxOYW1lLCB0eXBlSW5wdXQsIG5hbWVJbnB1dCwgaWRJbnB1dCwgcGxhY2Vob2xkZXJWYWx1ZSkge1xuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkSW5wdXQpO1xuICAgIGxhYmVsLmlubmVySFRNTCA9IGxhYmVsTmFtZTtcblxuICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgdHlwZUlucHV0KTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBuYW1lSW5wdXQpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCBpZElucHV0KTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgcGxhY2Vob2xkZXJWYWx1ZSk7XG5cbiAgICBsYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgbGFiZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAgYDxkaXYgY2xhc3M9XCJoaWRkZW4gZXJyb3JcIiBpZD1cIiR7bmFtZUlucHV0fS1lcnJvclwiPiR7bmFtZUlucHV0fSBpcyBub3QgY29ycmVjdDwvZGl2PmApO1xuICAgIHJldHVybiBsYWJlbDtcblxufVxuXG5mdW5jdGlvbiBjcmVhdGVEZWxldGVCbG9jayhhcnJheSkge1xuICAgIGxldCBibG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tYmxvY2snKTtcbiAgICBibG9jay5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImRlbGV0ZS1wb3B1cFwiPlxuICAgICAgICA8cCBjbGFzcyA9ICdsaXN0LWl0ZW1zJz5BcmUgeW91IHN1cmU/PC9wPlxuICAgICAgICA8YnV0dG9uIGNsYXNzID0gJyR7YXJyYXl9IGNhbmNlbCBidG4gYnRuLXN1Y2Nlc3MnPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGNsYXNzID0gJyR7YXJyYXl9IGNvbmZpcm0gYnRuIGJ0bi1kYW5nZXInPkRlbGV0ZTwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIGA7XG59XG5cbmZ1bmN0aW9uIGFkZERlbGV0ZURhdGFMaXN0ZW5lcihzZWxlY3RlZERhdGFDYXRlZ29yeSkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGUtcG9wdXAnKTtcbiAgXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbmNlbCcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb25maXJtJykgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdodW1hbicpICkge1xuICAgICAgICAgICAgZGVsZXRlRGF0YShodW1hbnNBcnIsIHNlbGVjdGVkRGF0YUNhdGVnb3J5KTsgXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb25maXJtJykgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wYW55JykgKSB7XG4gICAgICAgICAgICBkZWxldGVEYXRhKGNvbXBhbmllc0Fyciwgc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpOyBcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbmZpcm0nKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F1dG8nKSApIHtcbiAgICAgICAgICAgIGRlbGV0ZURhdGEoYXV0b0Fyciwgc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpOyBcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVTdG9yYWdlRGF0YSgpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkZWxldGVEYXRhKGFycmF5LCBzZWxlY3RlZERhdGFDYXRlZ29yeSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChhcnJheVtpXS5pZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0YScpO1xuICAgICAgICAgICAgY29uc3QgZGl2Q2F0ZWdvcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jYXRlZ29yeT1cIiR7c2VsZWN0ZWREYXRhQ2F0ZWdvcnl9XCJdYCk7XG5cbiAgICAgICAgICAgIHdyYXBwZXIucmVtb3ZlQ2hpbGQoZGl2Q2F0ZWdvcnkpO1xuICAgICAgICAgICAgYXJyYXkuc3BsaWNlKGksIDEpOyBcbiAgICAgICAgICAgIGJyZWFrOyBcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV0dG9uQWRkVXNlcihtYXJrZXIpIHtcbiAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby1ibG9jaycpO1xuICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWRkLWJ0bicsICdidG4td2FybmluZycsICdidG4nLCBtYXJrZXIpO1xuXG4gICAgaWYgKHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWJ0bicpKSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYXJlbnQuY2hpbGROb2Rlc1swXSk7XG4gICAgfVxuICAgXG4gICAgcGFyZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgYnV0dG9uKTtcbiAgICBidXR0b24uaW5uZXJIVE1MICs9ICdBZGQgdXNlcic7XG4gICAgXG5cbiAgICByZXR1cm4gYnV0dG9uO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDbG9zZUJ1dHRvbihwYXJlbnQpIHtcbiAgICBsZXQgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyZW50KTtcbiAgICB3cmFwcGVyLmlubmVySFRNTCArPSBgXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxuICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgIDwvYnV0dG9uPmA7XG4gICAgYWRkQ2xvc2VMaXN0ZW5lcigpO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgZ2V0SURcblxuZnVuY3Rpb24gZ2V0SWQoZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICAgIGxldCB2YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuXG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IGVsZW1lbnQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgXG4gICAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFxuXG5mdW5jdGlvbiBjaG9vc2VDbGlrZWRCdXR0b24oY3JlYXRlQ2xhc3MsIG5hbWUsIHNldEluZm8sIGFyciwgYXJyTmFtZSwgc2V0Q2xhc3MpIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcHRpb24nKS5maXJzdENoaWxkKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXB0aW9uJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRhJykuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGNyZWF0ZUNsYXNzKG5hbWUpO1xuICAgICAgICBzZXRJbmZvKGFyciwgYXJyTmFtZSk7XG4gICAgICAgIHNldENsYXNzKGFycik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3JlYXRlQ2xhc3MobmFtZSk7XG4gICAgICAgIHNldEluZm8oYXJyLCBhcnJOYW1lKTtcbiAgICAgICAgc2V0Q2xhc3MoYXJyKTtcbiAgICB9IFxufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lclRvSW5mb0J1dHRvbigpIHtcbiAgICBcbiAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbnMtYm94Jyk7IFxuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2h1bWFuJykpIHtcbiAgICAgICAgICAgIGNob29zZUNsaWtlZEJ1dHRvbihjcmVhdGVUYWJsZSwgJ1BlcnNvbiBOYW1lJywgc2V0SW5mb1RvVGFibGUsIGh1bWFuc0FyciwgJ2h1bWFuJywgc2V0RGF0YVRvVGFibGUpO1xuICAgICAgICAgICAgY3JlYXRlQnV0dG9uQWRkVXNlcignaHVtYW4nKTtcbiAgICAgICAgICAgIGFkZEFkZFVzZXJMaXN0ZW5lcnMoaHVtYW5zQXJyKTtcbiAgICAgICAgfSBcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY29tcGFueScpKSB7XG4gICAgICAgICAgICBjaG9vc2VDbGlrZWRCdXR0b24oY3JlYXRlVGFibGUsICdDb21wYW55IE5hbWUnLCBzZXRJbmZvVG9UYWJsZSwgY29tcGFuaWVzQXJyLCAnY29tcGFueScsIHNldERhdGFUb1RhYmxlKTtcbiAgICAgICAgICAgIGNyZWF0ZUJ1dHRvbkFkZFVzZXIoJ2NvbXBhbnknKTtcbiAgICAgICAgICAgIGFkZEFkZFVzZXJMaXN0ZW5lcnMoY29tcGFuaWVzQXJyKTtcbiAgICAgICAgfSBcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXV0bycpKSB7XG4gICAgICAgICAgICBjaG9vc2VDbGlrZWRCdXR0b24oY3JlYXRlVGFibGUsICdDYXIgTWFyaycsIHNldEluZm9Ub1RhYmxlLCBhdXRvQXJyLCAnYXV0bycsIHNldEF1dG9EYXRhVG9UYWJsZSk7XG4gICAgICAgICAgICBjcmVhdGVCdXR0b25BZGRVc2VyKCdhdXRvJyk7XG4gICAgICAgICAgICBhZGRBZGRVc2VyTGlzdGVuZXJzKGF1dG9BcnIpO1xuICAgICAgICB9XG4gICAgXG4gICAgfSk7XG4gICAgYWRkTGlzdGVuZXJUb0FjdGlvbnMoKTtcbn1cblxuZnVuY3Rpb24gYWRkTGlzdGVuZXJUb0FjdGlvbnMoKSB7XG4gICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRhJyk7IFxuICAgIGxldCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JhcHBlcicpO1xuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuY2xhc3NMaXN0LmFkZCgnYWN0aW9uLWJsb2NrJyk7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxldCBzZWxlY3RlZERhdGFDYXRlZ29yeSA9IHBhcnNlSW50KGdldElkKGUudGFyZ2V0LCBcImRhdGEtY2F0ZWdvcnlcIikpO1xuICAgICAgICBsZXQgYWN0aW9uYmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJsb2NrJyk7XG5cbiAgICAgICAgaWYgKGFjdGlvbmJsb2NrLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgYWN0aW9uYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7IFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aWV3JykgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdodW1hbicpKSB7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaHVtYW5zQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChodW1hbnNBcnJba2V5XS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCArPSBcbiAgICAgICAgICAgICAgICAgICAgYDxwPk5hbWU6ICR7aHVtYW5zQXJyW2tleV0ubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPkNhcmQgQmFsYW5jZTogJHtodW1hbnNBcnJba2V5XS5iYWxhbmNlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+UGhvbmUgbnVtYmVyOiAke2h1bWFuc0FycltrZXldLnRlbH08L3A+YFxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChodW1hbnNBcnJba2V5XS5jYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgKz0gXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHA+UHJvcGVydHk6ICR7aHVtYW5zQXJyW2tleV0uY2FyfTwvcD5gXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MICs9IFxuICAgICAgICAgICAgICAgICAgICAgICAgYDxwPlRoZXJlIGlzIG5vIHByb3BlcnR5IDwvcD5gXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQnVyZ2FpbkJ1dHRvbnMoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjcmVhdGVDbG9zZUJ1dHRvbignLmFjdGlvbi1ibG9jaycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZpZXcnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBhbnknKSkge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGNvbXBhbmllc0Fycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkgPT09IHBhcnNlSW50KGNvbXBhbmllc0FycltrZXldLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MICs9IFxuICAgICAgICAgICAgICAgICAgICBgPHA+TmFtZTogJHtjb21wYW5pZXNBcnJba2V5XS5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+Q2FyZCBCYWxhbmNlOiAke2NvbXBhbmllc0FycltrZXldLmJhbGFuY2V9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5QaG9uZSBudW1iZXI6ICR7Y29tcGFuaWVzQXJyW2tleV0udGVsfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+UGVvcGxlIGFtb3VudDogJHtjb21wYW5pZXNBcnJba2V5XS53b3JrZXJzQW1vdW50fTwvcD5gXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBhbmllc0FycltrZXldLmNhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCArPSBcbiAgICAgICAgICAgICAgICAgICAgICAgIGA8cD5Qcm9wZXJ0eTogJHtjb21wYW5pZXNBcnJba2V5XS5jYXJ9PC9wPmBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgKz0gXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHA+VGhlcmUgaXMgbm8gcHJvcGVydHkgPC9wPmBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVCdXJnYWluQnV0dG9ucyhzZWxlY3RlZERhdGFDYXRlZ29yeSk7XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBjcmVhdGVDbG9zZUJ1dHRvbignLmFjdGlvbi1ibG9jaycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZpZXcnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F1dG8nKSkge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGF1dG9BcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkgPT09IHBhcnNlSW50KGF1dG9BcnJba2V5XS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCArPSBcbiAgICAgICAgICAgICAgICAgICAgYDxwPk1hcms6ICR7YXV0b0FycltrZXldLm1hcmt9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5ZZWFyOiAke2F1dG9BcnJba2V5XS55ZWFyfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+UHJpY2U6ICR7YXV0b0FycltrZXldLnByaWNlfTwvcD5gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGNyZWF0ZUNsb3NlQnV0dG9uKCcuYWN0aW9uLWJsb2NrJyk7XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdCcpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaHVtYW4nKSkge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgZm9ybSA9IGNyZWF0ZUZvcm0oJ2VkaXRGb3JtJyk7XG4gICAgICAgICAgICBjcmVhdGVDbG9zZUJ1dHRvbignLmFjdGlvbi1ibG9jaycpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaHVtYW5zQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChodW1hbnNBcnJba2V5XS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ05hbWU6ICcsICd0ZXh0JywgJ25hbWUnLCAnbmFtZS1maWVsZCcsIGh1bWFuc0FycltrZXldLm5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ0JhbGFuY2U6ICcsICd0ZXh0JywgJ2JhbGFuY2UnLCAnYmFsYW5jZS1maWVsZCcsIGh1bWFuc0FycltrZXldLmJhbGFuY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ1RlbDogJywgJ3RleHQnLCAndGVsJywgJ3RlbC1maWVsZCcsIGh1bWFuc0FycltrZXldLnRlbCkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYnV0dG9uQ29uZiA9IGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKGZvcm0sICdjb25maXJtLWJ1dHRvbicsICdDb25maXJtJykpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25Db25mLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tc3VjY2VzcycsICdodW1hbi1idG4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgICAgICBhZGRFZGl0TGlzdGVuZXJzKHNlbGVjdGVkRGF0YUNhdGVnb3J5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXQnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBhbnknKSkge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgZm9ybSA9IGNyZWF0ZUZvcm0oJ2VkaXRGb3JtJyk7XG4gICAgICAgICAgICBjcmVhdGVDbG9zZUJ1dHRvbignLmFjdGlvbi1ibG9jaycpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gY29tcGFuaWVzQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChjb21wYW5pZXNBcnJba2V5XS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ25hbWU6ICcsICd0ZXh0JywgJ25hbWUnLCAnbmFtZS1maWVsZCcsIGNvbXBhbmllc0FycltrZXldLm5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ0JhbGFuY2U6ICcsICd0ZXh0JywgJ2JhbGFuY2UnLCAnYmFsYW5jZS1maWVsZCcsIGNvbXBhbmllc0FycltrZXldLmJhbGFuY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ1RlbDogJywgJ3RleHQnLCAndGVsJywgJ3RlbC1maWVsZCcsIGNvbXBhbmllc0FycltrZXldLnRlbCkpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUlucHV0cygnUGVvcGxlIGFtb3VudDogJywgJ3RleHQnLCAnd29ya2Vyc0Ftb3VudCcsICd3b3JrZXJzQW1vdW50LWZpZWxkJywgY29tcGFuaWVzQXJyW2tleV0ud29ya2Vyc0Ftb3VudCkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYnV0dG9uQ29uZiA9IGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKGZvcm0sICdjb25maXJtLWJ1dHRvbicsICdDb25maXJtJykpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25Db25mLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tc3VjY2VzcycsICdjb21wYW55LWJ0bicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIGFkZEVkaXRMaXN0ZW5lcnMoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdCcpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXV0bycpKSB7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gY3JlYXRlRm9ybSgnZWRpdEZvcm0nKTtcbiAgICAgICAgICAgIGNyZWF0ZUNsb3NlQnV0dG9uKCcuYWN0aW9uLWJsb2NrJyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBhdXRvQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChhdXRvQXJyW2tleV0uaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlSW5wdXRzKCdNYXJrOiAnLCAndGV4dCcsICdtYXJrJywgJ21hcmstZmllbGQnLCBhdXRvQXJyW2tleV0ubWFyaykpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUlucHV0cygnWWVhcjogJywgJ3RleHQnLCAneWVhcicsICd5ZWFyLWZpZWxkJywgYXV0b0FycltrZXldLnllYXIpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ1ByaWNlOiAnLCAndGV4dCcsICdwcmljZScsICdwcmljZS1maWVsZCcsIGF1dG9BcnJba2V5XS5wcmljZSkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYnV0dG9uQ29uZiA9IGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKGZvcm0sICdjb25maXJtLWJ1dHRvbicsICdDb25maXJtJykpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25Db25mLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tc3VjY2VzcycsICdhdXRvLWJ0bicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgICAgIGFkZEVkaXRMaXN0ZW5lcnMoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlJykgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdodW1hbicpKSB7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBodW1hbnNBcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkgPT09IHBhcnNlSW50KGh1bWFuc0FycltrZXldLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVEZWxldGVCbG9jaygnaHVtYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkRGVsZXRlRGF0YUxpc3RlbmVyKHNlbGVjdGVkRGF0YUNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBhbnknKSkge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gY29tcGFuaWVzQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChjb21wYW5pZXNBcnJba2V5XS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRGVsZXRlQmxvY2soJ2NvbXBhbnknKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkRGVsZXRlRGF0YUxpc3RlbmVyKHNlbGVjdGVkRGF0YUNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F1dG8nKSkge1xuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gYXV0b0Fycikge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGFDYXRlZ29yeSA9PT0gcGFyc2VJbnQoYXV0b0FycltrZXldLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVEZWxldGVCbG9jaygnYXV0bycpO1xuICAgICAgICAgICAgICAgICAgICBhZGREZWxldGVEYXRhTGlzdGVuZXIoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTZWxlY3RJbnB1dCgpIHtcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdzZWxlY3QnKTtcbiAgICB3cmFwcGVyLmlubmVySFRNTCArPSAnQ2hvb3NlIGNhcic7XG4gICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgc2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdjYXInKVxuICAgIHNlbGVjdC5pbm5lckhUTUwgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1dG9BcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VsZWN0LmlubmVySFRNTCArPSBgPG9wdGlvbj4ke2F1dG9BcnJbaV0ubWFya308L29wdGlvbj5gO1xuICAgIH1cbiAgIFxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZWN0KTsgXG4gICAgd3JhcHBlci5pbm5lckhUTUwgKz0gYDxkaXYgY2xhc3M9XCJoaWRkZW4gZXJyb3JcIiBpZD1cImNhci1lcnJvclwiPmNhciBpcyBub3QgY29ycmVjdDwvZGl2PmBcbiAgICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gYWRkRWRpdExpc3RlbmVycyhzZWxlY3RlZERhdGFDYXRlZ29yeSkge1xuICAgIGNvbnN0IGNvbmZCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1idXR0b24nKTtcbiAgICBcbiAgICBjb25mQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuXG4gICAgICAgIGNvbnN0IHZhbGlkRWxlbWVudHMgPSB7fTsgICAgICAgICAgIFxuICAgICAgICBjb25zdCBlbGVtZW50c0FyciA9IE9iamVjdC52YWx1ZXMoZm9ybSk7XG4gICAgICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50c0Fycikge1xuICAgICAgICBpZiAoIWVsZW1lbnQubmFtZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1ZhbGlkVmFsdWUgPSBpc1ZhbGlkKGVsZW1lbnQudmFsdWUsIGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgaWYgKGlzVmFsaWRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQubmFtZSA9PT0gJ2lkJykge1xuICAgICAgICAgICAgICAgIGZpbmRJRChlbGVtZW50Lm5hbWUsIGVsZW1lbnQudmFsdWUsIHZhbGlkRWxlbWVudHMsIGZvcm0pOyBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsaWRFbGVtZW50c1tlbGVtZW50Lm5hbWVdID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkZWxldGUgdmFsaWRFbGVtZW50c1tlbGVtZW50Lm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsaWRhdGUoaXNWYWxpZFZhbHVlLCBlbGVtZW50Lm5hbWUpOyAgICBcbiAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBlZGl0RWxlbWVudChlLCB2YWxpZEVsZW1lbnRzLCBzZWxlY3RlZERhdGFDYXRlZ29yeSk7XG4gICAgICAgIHJldHVybiB2YWxpZEVsZW1lbnRzO1xuICAgIH0pO1xuICAgIFxufVxuXG5mdW5jdGlvbiBmaW5kSUQoZWxlbWVudE5hbWUsIGVsZW1lbnRWYWx1ZSwgdmFsaWRFbGVtZW50cywgZm9ybSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaHVtYW5zQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChodW1hbnNBcnJbaV0uaWQgPT09IHBhcnNlSW50KGVsZW1lbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkZWxldGUgdmFsaWRFbGVtZW50c1tlbGVtZW50TmFtZV07XG4gICAgICAgICAgICBsZXQgZXJyb3JJZFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICBlcnJvcklkVGV4dC5jbGFzc0xpc3QuYWRkKCd3cm9uZ0lEJyk7XG4gICAgICAgICAgICBlcnJvcklkVGV4dC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybS5xdWVyeVNlbGVjdG9yKCcud3JvbmdJRCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0ucmVtb3ZlQ2hpbGQoZm9ybS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgZXJyb3JJZFRleHQuaW5uZXJIVE1MICs9IFwiVGhpcyBJRCBoYXMgYWxyZWFkeSB1c2VkXCJcbiAgICAgICAgICAgIGZvcm0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgZXJyb3JJZFRleHQpOyBcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmb3JtLnF1ZXJ5U2VsZWN0b3IoJy53cm9uZ0lEJykpIHtcbiAgICAgICAgICAgICAgICBmb3JtLnJlbW92ZUNoaWxkKGZvcm0uY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgdmFsaWRFbGVtZW50c1tlbGVtZW50TmFtZV0gPSBlbGVtZW50VmFsdWU7IFxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcGFuaWVzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjb21wYW5pZXNBcnJbaV0uaWQgPT09IHBhcnNlSW50KGVsZW1lbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkZWxldGUgdmFsaWRFbGVtZW50c1tlbGVtZW50TmFtZV07XG4gICAgICAgICAgICBsZXQgZXJyb3JJZFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICBlcnJvcklkVGV4dC5jbGFzc0xpc3QuYWRkKCd3cm9uZ0lEJyk7XG4gICAgICAgICAgICBlcnJvcklkVGV4dC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybS5xdWVyeVNlbGVjdG9yKCcud3JvbmdJRCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0ucmVtb3ZlQ2hpbGQoZm9ybS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgZXJyb3JJZFRleHQuaW5uZXJIVE1MICs9IFwiVGhpcyBJRCBoYXMgYWxyZWFkeSB1c2VkXCJcbiAgICAgICAgICAgIGZvcm0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgZXJyb3JJZFRleHQpOyBcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmb3JtLnF1ZXJ5U2VsZWN0b3IoJy53cm9uZ0lEJykpIHtcbiAgICAgICAgICAgICAgICBmb3JtLnJlbW92ZUNoaWxkKGZvcm0uY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgdmFsaWRFbGVtZW50c1tlbGVtZW50TmFtZV0gPSBlbGVtZW50VmFsdWU7IFxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXV0b0Fyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXV0b0FycltpXS5pZCA9PT0gcGFyc2VJbnQoZWxlbWVudFZhbHVlKSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB2YWxpZEVsZW1lbnRzW2VsZW1lbnROYW1lXTtcbiAgICAgICAgICAgIGxldCBlcnJvcklkVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgIGVycm9ySWRUZXh0LmNsYXNzTGlzdC5hZGQoJ3dyb25nSUQnKTtcbiAgICAgICAgICAgIGVycm9ySWRUZXh0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChmb3JtLnF1ZXJ5U2VsZWN0b3IoJy53cm9uZ0lEJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5yZW1vdmVDaGlsZChmb3JtLmNoaWxkTm9kZXNbMF0pO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBlcnJvcklkVGV4dC5pbm5lckhUTUwgKz0gXCJUaGlzIElEIGhhcyBhbHJlYWR5IHVzZWRcIlxuICAgICAgICAgICAgZm9ybS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBlcnJvcklkVGV4dCk7IFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZvcm0ucXVlcnlTZWxlY3RvcignLndyb25nSUQnKSkge1xuICAgICAgICAgICAgICAgIGZvcm0ucmVtb3ZlQ2hpbGQoZm9ybS5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB2YWxpZEVsZW1lbnRzW2VsZW1lbnROYW1lXSA9IGVsZW1lbnRWYWx1ZTsgXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVkaXRFbGVtZW50KGUsIGVsZW1lbnQsIHNlbGVjdGVkRGF0YUNhdGVnb3J5KSB7XG4gICAgaWYgKCBPYmplY3Qua2V5cyhlbGVtZW50KS5pbmNsdWRlcygna2V5JykpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2h1bWFuLWJ0bicpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bWFuc0Fyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERhdGFDYXRlZ29yeSA9PT0gaHVtYW5zQXJyW2ldLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpZCA9IGh1bWFuc0FycltpXS5pZDtcbiAgICAgICAgICAgICAgICAgICAgaHVtYW5zQXJyW2ldID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaHVtYW5zQXJyW2ldLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlU3RvcmFnZURhdGEoKTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBhbnktYnRuJykpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcGFuaWVzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBjb21wYW5pZXNBcnJbaV0uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlkID0gY29tcGFuaWVzQXJyW2ldLmlkO1xuICAgICAgICAgICAgICAgICAgICBjb21wYW5pZXNBcnJbaV0gPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBjb21wYW5pZXNBcnJbaV0uaWQgPSBpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVTdG9yYWdlRGF0YSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXV0by1idG4nKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdXRvQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBhdXRvQXJyW2ldLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpZCA9IGF1dG9BcnJbaV0uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9BcnJbaV0gPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBhdXRvQXJyW2ldLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlU3RvcmFnZURhdGEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuZnVuY3Rpb24gYWRkQWRkVXNlckxpc3RlbmVycygpIHtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWJ0bicpO1xuICAgIGxldCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1ibG9jaycpO1xuICAgIFxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSAnJzsgXG4gICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBjcmVhdGVGb3JtKCdhZGRGb3JtJyk7XG5cbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaHVtYW4nKSkge1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ0lEOiAnLCAndGV4dCcsICdpZCcsICdpZC1maWVsZCcsICcnKSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUlucHV0cygnTmFtZTogJywgJ3RleHQnLCAnbmFtZScsICduYW1lLWZpZWxkJywgJycpKTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlSW5wdXRzKCdCYWxhbmNlOiAnLCAndGV4dCcsICdiYWxhbmNlJywgJ2JhbGFuY2UtZmllbGQnLCAnJykpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ1RlbDogJywgJ3RleHQnLCAndGVsJywgJ3RlbC1maWVsZCcsICcnKSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZVNlbGVjdElucHV0KCkpO1xuICAgICAgICAgICAgbGV0IGJ1dHRvblNhdmUgPSBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbihmb3JtLCAnc2F2ZS1idXR0b24nLCAnU2F2ZScpKTsgXG4gICAgICAgICAgICBidXR0b25TYXZlLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tc3VjY2VzcycsICdodW1hbicpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wYW55JykpIHtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlSW5wdXRzKCdJRDogJywgJ3RleHQnLCAnaWQnLCAnaWQtZmllbGQnLCAnJykpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ25hbWU6ICcsICd0ZXh0JywgJ25hbWUnLCAnbmFtZS1maWVsZCcsICcnKSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUlucHV0cygnQmFsYW5jZTogJywgJ3RleHQnLCAnYmFsYW5jZScsICdiYWxhbmNlLWZpZWxkJywgJycpKTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlSW5wdXRzKCdUZWw6ICcsICd0ZXh0JywgJ3RlbCcsICd0ZWwtZmllbGQnLCAnJykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUlucHV0cygnV29ya2VycyBhbW91bnQ6ICcsICd0ZXh0JywgJ3dvcmtlcnNBbW91bnQnLCAnd29ya2Vyc0Ftb3VudC1maWVsZCcsICcnKSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZVNlbGVjdElucHV0KCkpO1xuICAgICAgICAgICAgbGV0IGJ1dHRvblNhdmUgPSBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbihmb3JtLCAnc2F2ZS1idXR0b24nLCAnU2F2ZScpKTsgXG4gICAgICAgICAgICBidXR0b25TYXZlLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tc3VjY2VzcycsICdjb21wYW55Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdXRvJykpIHtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlSW5wdXRzKCdJRDogJywgJ3RleHQnLCAnaWQnLCAnaWQtZmllbGQnLCAnJykpO1xuICAgICAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjcmVhdGVJbnB1dHMoJ01hcms6ICcsICd0ZXh0JywgJ21hcmsnLCAnbWFyay1maWVsZCcsICcnKSk7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUlucHV0cygnWWVhcjogJywgJ3RleHQnLCAneWVhcicsICd5ZWFyLWZpZWxkJywgJycpKTtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3JlYXRlSW5wdXRzKCdQcmljZTogJywgJ3RleHQnLCAncHJpY2UnLCAncHJpY2UtZmllbGQnLCAnJykpO1xuICAgICAgICAgICAgbGV0IGJ1dHRvblNhdmUgPSBmb3JtLmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbihmb3JtLCAnc2F2ZS1idXR0b24nLCAnU2F2ZScpKTsgXG4gICAgICAgICAgICBidXR0b25TYXZlLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tc3VjY2VzcycsICdhdXRvJyk7XG4gICAgICAgIH1cbiAgICAgICBcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgICAgXG4gICAgICAgIGNyZWF0ZUNsb3NlQnV0dG9uKCcuYWN0aW9uLWJsb2NrJyk7XG4gICAgICAgIGFkZFNhdmVMaXN0ZW5lcnMoKTtcbiAgICB9KTtcbn1cbiAgICBcbmZ1bmN0aW9uIGFkZENsb3NlTGlzdGVuZXIoKSB7XG4gICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpO1xuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBpbmZvYmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJsb2NrJyk7XG4gICAgICAgIGluZm9ibG9jay5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hd2FyZScpKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXdhcmUnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgIH0pXG59ICAgXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB2YWxpZGF0aW9uXG5cbmZ1bmN0aW9uIGFkZFNhdmVMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zYXZlLWJ1dHRvbicpO1xuICAgIGNvbnN0IHZhbGlkRWxlbWVudHMgPSB7fTtcblxuICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlbGVtZW50c0FyciA9IE9iamVjdC52YWx1ZXMoZm9ybSk7XG5cbiAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50c0Fycikge1xuICAgICAgICBpZiAoIWVsZW1lbnQubmFtZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICBjb25zdCBpc1ZhbGlkVmFsdWUgPSBpc1ZhbGlkKGVsZW1lbnQudmFsdWUsIGVsZW1lbnQubmFtZSk7XG5cbiAgICAgICAgaWYgKGlzVmFsaWRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQubmFtZSA9PT0gJ2lkJykge1xuICAgICAgICAgICAgICAgICAgICBmaW5kSUQoZWxlbWVudC5uYW1lLCBlbGVtZW50LnZhbHVlLCB2YWxpZEVsZW1lbnRzLCBmb3JtKTsgXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lm5hbWUgPT09ICdjYXInKSB7IFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1dG9BcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRvQXJyW2ldLm1hcmsgPT09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0b0FycltpXS5wcmljZSA8PSBwYXJzZUludCh2YWxpZEVsZW1lbnRzLmJhbGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLnF1ZXJ5U2VsZWN0b3IoJy53cm9uZ0NhcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnJlbW92ZUNoaWxkKGZvcm0uY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkRWxlbWVudHNbZWxlbWVudC5uYW1lXSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkRWxlbWVudHMuYmFsYW5jZSA9IHZhbGlkRWxlbWVudHMuYmFsYW5jZSAtIGF1dG9BcnJbaV0ucHJpY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWxpZEVsZW1lbnRzW2VsZW1lbnQubmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9ySWRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySWRUZXh0LmNsYXNzTGlzdC5hZGQoJ3dyb25nQ2FyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJZFRleHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLnF1ZXJ5U2VsZWN0b3IoJy53cm9uZ0NhcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnJlbW92ZUNoaWxkKGZvcm0uY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJZFRleHQuaW5uZXJIVE1MICs9IFwiWW91IGhhdmUgbm90IG1vbmV5IGZvciBwdXJjaGFzZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBlcnJvcklkVGV4dCk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsaWRFbGVtZW50c1tlbGVtZW50Lm5hbWVdID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkZWxldGUgdmFsaWRFbGVtZW50c1tlbGVtZW50Lm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsaWRhdGUoaXNWYWxpZFZhbHVlLCBlbGVtZW50Lm5hbWUpOyAgICBcbiAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdodW1hbicpICYmIGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmhpZGRlbicpLmxlbmd0aCA9PT0gNSAmJiAhZm9ybS5xdWVyeVNlbGVjdG9yKCdwJykpIHtcbiAgICAgICAgICAgIGh1bWFuc0Fyci5wdXNoKHZhbGlkRWxlbWVudHMpO1xuICAgICAgICAgICAgdXBkYXRlU3RvcmFnZURhdGEoKTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBhbnknKSAmJiBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5oaWRkZW4nKS5sZW5ndGggPT09IDYgJiYgIWZvcm0ucXVlcnlTZWxlY3RvcigncCcpKSB7XG4gICAgICAgICAgICBjb21wYW5pZXNBcnIucHVzaCh2YWxpZEVsZW1lbnRzKTtcbiAgICAgICAgICAgIHVwZGF0ZVN0b3JhZ2VEYXRhKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdXRvJykgJiYgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuaGlkZGVuJykubGVuZ3RoID09PSA0ICAmJiAhZm9ybS5xdWVyeVNlbGVjdG9yKCdwJykpIHtcbiAgICAgICAgICAgIGF1dG9BcnIucHVzaCh2YWxpZEVsZW1lbnRzKTtcbiAgICAgICAgICAgIHVwZGF0ZVN0b3JhZ2VEYXRhKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbGlkRWxlbWVudHM7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKGlzVmFsaWQsIGtleSkgeyAgICBcbiAgICBpZiAoIWlzVmFsaWQpIHsgXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGtleSArICctZXJyb3InKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChrZXkgKyAnLWVycm9yJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkKHZhbHVlLCBrZXkpIHtcbiAgICBsZXQgdXNlclJlZ0V4cHMgPSBzZXRQYXR0ZXJucygpO1xuICAgIHJldHVybiB1c2VyUmVnRXhwc1trZXldLnRlc3QodmFsdWUpO1xufVxuXG5cbmZ1bmN0aW9uIHNldFBhdHRlcm5zKCkge1xuICAgIGNvbnN0IHBhdHRlcm4gPSB7XG4gICAgICAgIGlkOiAvXlswLTldezEsfSQvZyxcbiAgICAgICAgbmFtZTogL15bQS1aXVthLXpdezEsMjB9JC9nLFxuICAgICAgICBvd25lcjogL15bQS1aXVthLXpdezEsMjB9JC9nLFxuICAgICAgICBtYXJrOiAvXltBLVpdW2Etel17MSwyMH1cXHM/W0EtWl0/W2Etel17MSwyMH0/JC9nLFxuICAgICAgICB5ZWFyOiAvXlswLTldezR9JC9nLFxuICAgICAgICB3b3JrZXJzQW1vdW50OiAvXlswLTldezEsfSQvLFxuICAgICAgICBiYWxhbmNlOiAvXlswLTldezEsfSQvZyxcbiAgICAgICAgdGVsOiAvXlxcKz8zOFxcc1swLTldezN9XFxzWzAtOV17M31cXHNbMC05XXsyfVxcc1swLTldezJ9JC9nLFxuICAgICAgICBwcmljZTogL15bMC05XXsxLH0kL2csXG4gICAgICAgIGNhcjogL15bQS1aXVthLXpdezEsMjB9JC9nLFxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcGF0dGVybjtcbn0gIFxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gYnV5L3NvbGRcblxuZnVuY3Rpb24gY3JlYXRlQnVyZ2FpbkJ1dHRvbnMoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpIHtcbiAgICBjb25zdCBidXR0b25XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3Qgd3JhcHBlckJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1ibG9jaycpO1xuXG4gICAgYnV0dG9uV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdidXJnYWluLWJ1dHRvbnMnKTtcbiAgICBidXR0b25XcmFwcGVyLmlubmVySFRNTCArPSBcbiAgICBgXG4gICAgPGJ1dHRvbiBjbGFzcz1cImJ1eS1idXR0b24gYnRuIGJ0bi1vdXRsaW5lLWRhbmdlclwiPkJ1eSBjYXI8L2J1dHRvbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwic29sZC1idXR0b24gYnRuIGJ0bi1vdXRsaW5lLXN1Y2Nlc3NcIj5Tb2xkIGNhcjwvYnV0dG9uPlxuICAgIGBcblxuICAgIHdyYXBwZXJCbG9jay5hcHBlbmRDaGlsZChidXR0b25XcmFwcGVyKTtcbiAgICBhZGRCdXJnYWluTGlzdGVuZXIoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpO1xuICAgIFxufVxuXG5mdW5jdGlvbiBhZGRCdXJnYWluTGlzdGVuZXIoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkpIHtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJsb2NrJyk7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2J1eS1idXR0b24nKSkge1xuICAgICAgICAgICAgY2hlY2hQcm9wZXJ0eShodW1hbnNBcnIsIHNlbGVjdGVkRGF0YUNhdGVnb3J5LCBidXR0b24pO1xuICAgICAgICAgICAgY2hlY2hQcm9wZXJ0eShjb21wYW5pZXNBcnIsIHNlbGVjdGVkRGF0YUNhdGVnb3J5LCBidXR0b24pO1xuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzb2xkLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaHVtYW5zQXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUNhdGVnb3J5ID09PSBwYXJzZUludChodW1hbnNBcnJba2V5XS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh1bWFuc0FycltrZXldLmNhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRGVsZXRlQmxvY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZExpc3RlbmVyRm9yU29sZENhcihzZWxlY3RlZERhdGFDYXRlZ29yeSwgaHVtYW5zQXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJBd2FyZUJsb2NrKCcuYXdhcmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdhd2FyZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCArPSAnWW91IGRvbmB0IGhhdmUgYW55IGNhcnMnOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1cmdhaW5CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdhaW4tYnV0dG9ucycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVyZ2FpbkJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBjb21wYW5pZXNBcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkgPT09IHBhcnNlSW50KGNvbXBhbmllc0FycltrZXldLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGFuaWVzQXJyW2tleV0uY2FyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVEZWxldGVCbG9jaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkTGlzdGVuZXJGb3JTb2xkQ2FyKHNlbGVjdGVkRGF0YUNhdGVnb3J5LCBjb21wYW5pZXNBcnIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckF3YXJlQmxvY2soJy5hd2FyZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2F3YXJlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MICs9ICdZb3UgZG9uYHQgaGF2ZSBhbnkgY2Fycyc7IFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVyZ2FpbkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2Fpbi1idXR0b25zJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXJnYWluQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjaGVjaFByb3BlcnR5KGFycmF5LCBzZWxlY3RlZERhdGFDYXRlZ29yeSwgYnV0dG9uKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGFycmF5KSB7XG4gICAgICAgIGlmIChzZWxlY3RlZERhdGFDYXRlZ29yeSA9PT0gcGFyc2VJbnQoYXJyYXlba2V5XS5pZCkpIHtcbiAgICAgICAgICAgIGlmIChhcnJheVtrZXldLmNhcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGNsZWFyQXdhcmVCbG9jaygnLmF3YXJlJyk7XG4gICAgICAgICAgICAgICAgY2xlYXJBd2FyZUJsb2NrKCcuc2VsZWN0Jyk7XG4gICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2F3YXJlJyk7XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCArPSAnWW91IGhhdmUgY2FyJztcbiAgICAgICAgICAgICAgICBjb25zdCBidXJnYWluQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnYWluLWJ1dHRvbnMnKTtcbiAgICAgICAgICAgICAgICBidXJnYWluQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYXJBd2FyZUJsb2NrKCcuYXdhcmUnKTtcbiAgICAgICAgICAgICAgICBjbGVhckF3YXJlQmxvY2soJy5zZWxlY3QnKTtcblxuICAgICAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGNyZWF0ZVNlbGVjdElucHV0KCkpO1xuICAgICAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGNyZWF0ZUJ1eUJ1dHRvbigpKTtcbiAgICAgICAgICAgIGFkZEJ1eUxpc3RlbmVyKHNlbGVjdGVkRGF0YUNhdGVnb3J5LCBhcnJheSk7XG4gICAgICAgICAgICBjb25zdCBidXJnYWluQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnYWluLWJ1dHRvbnMnKTtcbiAgICAgICAgICAgIGJ1cmdhaW5CdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyRm9yU29sZENhcihzZWxlY3RlZERhdGFDYXRlZ29yeSwgYXJyYXkpIHtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlLXBvcHVwJyk7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhbmNlbCcpKSB7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY29uZmlybScpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkgPT09IHBhcnNlSW50KGFycmF5W2tleV0uaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MICs9IFxuICAgICAgICAgICAgICAgICAgICBgPHA+VGhlcmUgaXMgbm8gbW9yZSBwcm9wZXJ0eSA8L3A+YDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlID0gZmluZEN1cnJlbnRDYXIoYXJyYXlba2V5XS5jYXIpO1xuICAgICAgICAgICAgICAgICAgICBhcnJheVtrZXldLmJhbGFuY2UgPSBhcnJheVtrZXldLmJhbGFuY2UgKyBwcmljZTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFycmF5W2tleV0uY2FyO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdyYXJyZXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aW9uLWJsb2NrJyk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXJyZXAuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RvcmFnZURhdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZmluZEN1cnJlbnRDYXIoY2FyKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGF1dG9BcnIpIHtcbiAgICAgICAgaWYgKGNhciA9PT0gYXV0b0FycltrZXldLm1hcmspIHtcbiAgICAgICAgICAgIHJldHVybiBhdXRvQXJyW2tleV0ucHJpY2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNsZWFyQXdhcmVCbG9jayhzZWxlY3Rvcikge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tYmxvY2snKTtcblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSkge1xuICAgICAgICBidXR0b24ubGFzdENoaWxkLnJlbW92ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQnV5QnV0dG9uKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3QtYW5kLWJ1eScsICdidG4nLCAnYnRuLXN1Y2Nlc3MnKVxuICAgIGJ1dHRvbi5pbm5lclRleHQgPSAnQnV5JztcblxuICAgIHJldHVybiBidXR0b247XG59XG5cbmZ1bmN0aW9uIGFkZEJ1eUxpc3RlbmVyKHNlbGVjdGVkRGF0YUNhdGVnb3J5LCBhcnJheSkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYW5kLWJ1eScpO1xuICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tYmxvY2snKVxuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdENhcmluZGV4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0Jykub3B0aW9ucy5zZWxlY3RlZEluZGV4O1xuICAgICAgICBjb25zdCBzZWxlY3RlZENhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpLm9wdGlvbnNbc2VsZWN0Q2FyaW5kZXhdLnRleHQ7XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGFycmF5KSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhQ2F0ZWdvcnkgPT09IHBhcnNlSW50KGFycmF5W2tleV0uaWQpKSB7XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdXRvQXJyLmxlbmd0aDsgaSsrKSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2FyID09PSBhdXRvQXJyW2ldLm1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0b0FycltpXS5wcmljZSA8PSBwYXJzZUludChhcnJheVtrZXldLmJhbGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JvbmdDYXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHBhcmVudC5jaGlsZE5vZGVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlba2V5XS5jYXIgPSBzZWxlY3RlZENhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlba2V5XS5iYWxhbmNlID0gYXJyYXlba2V5XS5iYWxhbmNlIC0gYXV0b0FycltpXS5wcmljZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RvcmFnZURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9ySWRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcklkVGV4dC5jbGFzc0xpc3QuYWRkKCd3cm9uZ0NhcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcklkVGV4dC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndyb25nQ2FyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYXJlbnQuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJZFRleHQuaW5uZXJIVE1MICs9IFwiWW91IGhhdmUgbm90IG1vbmV5IGZvciBwdXJjaGFzZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBlcnJvcklkVGV4dCk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59Il19
